<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>امتحان تفاعلي</title>
    <!-- تحميل Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* استخدام خط Inter للإنجليزية و Cairo للعربية */
        body {
            font-family: 'Inter', 'Cairo', sans-serif;
        }
        /* كلاسات مخصصة للتصحيح */
        .correct {
            background-color: #16a34a !important; /* bg-green-600 */
            color: white !important;
            border-color: #22c55e; /* border-green-500 */
            border-width: 2px;
        }
        .incorrect {
            background-color: #dc2626 !important; /* bg-red-600 */
            color: white !important;
            border-color: #ef4444; /* border-red-500 */
            border-width: 2px;
        }
        /* إخفاء العنصر */
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 sm:p-10 w-full max-w-3xl">

        <!-- حاوية الاختبار -->
        <div id="quiz-container">
            <header class="text-center mb-6">
                <h1 class="text-3xl font-bold text-cyan-400">اول تست بانك في الشبكات</h1>
                <p id="progress" class="text-lg text-gray-400 mt-2"></p>
            </header>

            <!-- منطقة السؤال -->
            <div class="bg-gray-900 p-6 rounded-lg shadow-inner min-h-[100px] flex items-center justify-center">
                <h2 id="question" class="text-2xl font-semibold text-center leading-relaxed"></h2>
            </div>

            <!-- منطقة الخيارات -->
            <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8">
                <!-- سيتم ملء الخيارات هنا عبر جافاسكريبت -->
            </div>

            <!-- منطقة الإفادة (صحيح/خاطئ) -->
            <div id="feedback" class="text-center text-xl font-bold mt-6 min-h-[2rem]">
                <!-- سيتم عرض الإفادة هنا -->
            </div>

            <!-- زر التالي -->
            <button id="next-btn" class="hidden bg-cyan-600 text-white font-bold py-3 px-8 rounded-lg mt-8 w-full hover:bg-cyan-700 transition-colors duration-300 shadow-lg text-lg">
                التالي
            </button>
        </div>

        <!-- حاوية النتائج (مخفية افتراضيًا) -->
        <div id="results-container" class="hidden text-center">
            <h2 class="text-4xl font-bold text-cyan-400 mb-4">اكتمل الاختبار!</h2>
            <p id="score" class="text-3xl text-white mb-8"></p>
            <button id="restart-btn" class="bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-700 transition-colors duration-300 shadow-lg text-lg">
                إعادة الاختبار
            </button>
        </div>
    </div>

    <script>
        // --- 1. تعريف الأسئلة ---
        const allQuestions = [
            // --- أسئلة الاختيار من متعدد ---
            {
                question: "1- check bit errors.",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'nodal processing'
            },
            {
                question: "2- determine output link.",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'nodal processing'
            },
            {
                question: "3- time waiting at output link for transmission.",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'queueing delay'
            },
            {
                question: "4- depends on congestion level of router.",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'queueing delay'
            },
            {
                question: "5- = L/R, L: packet length (bits), R: link bandwidth (bps).",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'transmission delay'
            },
            {
                question: "6- = d/s, d: length of physical link, s: propagation speed in medium.",
                type: 'mcq',
                options: ['nodal processing', 'queueing delay', 'transmission delay', 'propagation delay'],
                answer: 'propagation delay'
            },
            {
                question: "7- self-replicating infection by receiving/executing object (e.g., e-mail attachment)",
                type: 'mcq',
                options: ['virus', 'worm', 'spyware', 'botnet'],
                answer: 'virus'
            },
            {
                question: "8- self-replicating infection by passively receiving object that gets itself executed",
                type: 'mcq',
                options: ['virus', 'worm', 'spyware', 'botnet'],
                answer: 'worm'
            },
            {
                question: "9- malware can record keystrokes, web sites visited, upload info to collection site.",
                type: 'mcq',
                options: ['virus', 'worm', 'spyware', 'botnet'],
                answer: 'spyware'
            },
            {
                question: "10- attackers make resources (server, bandwidth) unavailable to legitimate traffic...",
                type: 'mcq',
                options: ['virus', 'worm', 'spyware', 'DoS'],
                answer: 'DoS'
            },
            // --- أسئلة الصح والخطأ ---
            { question: "11- RFC stands for Request for comments.", type: 'tf', answer: true },
            { question: "12- IETF stands for Internet Engineering Task Force.", type: 'tf', answer: true },
            { question: "13- protocols define format, order of msgs sent and received...", type: 'tf', answer: true },
            { question: "14- voice over DSL phone line goes to Internet.", type: 'tf', answer: false },
            { question: "15- data over DSL phone line goes to telephone net.", type: 'tf', answer: false },
            { question: "16- In DSL, voice, data transmitted at different frequencies over dedicated line...", type: 'tf', answer: true },
            { question: "17- DSL stands for digital subscriber line.", type: 'tf', answer: true },
            { question: "18- In cable network, data, TV transmitted at different frequencies over shared cable...", type: 'tf', answer: true },
            { question: "19- link transmission rate, aka link capacity, aka link bandwidth.", type: 'tf', answer: true },
            { question: "20- packet transmission delay = time needed to transmit L-bit packet into link.", type: 'tf', answer: true },
            { question: "21- twisted pair (TP) is two insulated copper wires.", type: 'tf', answer: true },
            { question: "22- In packet-switching hosts break application-layer messages into packets.", type: 'tf', answer: true },
            { question: "23- If arrival rate... exceeds transmission rate... packets will queue...", type: 'tf', answer: true },
            { question: "24- If arrival rate... exceeds transmission rate... packets can be dropped...", type: 'tf', answer: true },
            { question: "25- forwarding: determines source-destination route taken by packets.", type: 'tf', answer: false },
            { question: "26- routing: move packets from router’s input to appropriate router output.", type: 'tf', answer: false },
            { question: "27- connecting each access ISP to each other directly does scale.", type: 'tf', answer: false },
            { question: "28- R: link bandwidth (bps), L: packet length (bits), a: average packet arrival rate, La/R ~ 0: avg. queueing delay small.", type: 'tf', answer: true },
            { question: "29- R: ... La/R -> 1: avg. queueing delay large.", type: 'tf', answer: true },
            { question: "30- R: ... La/R > 1: ... average delay infinite!", type: 'tf', answer: true },
            { question: "31- lost packet may be retransmitted by previous node, by source end system, or not at all.", type: 'tf', answer: true },
            { question: "32- throughput: rate (bits/time unit) at which bits transferred between sender/receiver.", type: 'tf', answer: true },
            { question: "33- In ISO/OSI... presentation: allow applications to interpret meaning of data...", type: 'tf', answer: true },
            { question: "34- Internet stack missing the layers presentation and session.", type: 'tf', answer: true },
            { question: "35- infected host can be enrolled in botnet, used for spam.", type: 'tf', answer: true },
            { question: "36- IP spoofing: send packet with true source address.", type: 'tf', answer: false },
            { question: "37- server not always-on host.", type: 'tf', answer: false },
            { question: "38- server has permanent IP address.", type: 'tf', answer: true },
            { question: "39- In client-server architecture, clients communicate with server.", type: 'tf', answer: true },
            { question: "40- In client-server architecture, clients may be intermittently connected.", type: 'tf', answer: true }
        ];

        // --- 2. الإشارة إلى عناصر الصفحة ---
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const questionEl = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const progressEl = document.getElementById('progress');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');
        const restartBtn = document.getElementById('restart-btn');

        // --- 3. متغيرات حالة الاختبار ---
        let currentQuestionIndex = 0;
        let score = 0;
        let answerSelected = false;

        // --- 4. وظائف الاختبار ---

        /** بدء الاختبار أو إعادة تشغيله */
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answerSelected = false;
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            loadQuestion();
        }

        /** تحميل السؤال الحالي */
        function loadQuestion() {
            answerSelected = false; // السماح باختيار إجابة للسؤال الجديد
            feedbackEl.textContent = ''; // مسح الإفادة السابقة
            nextBtn.classList.add('hidden'); // إخفاء زر التالي
            optionsContainer.innerHTML = ''; // مسح الخيارات القديمة

            const currentQuestion = allQuestions[currentQuestionIndex];
            
            // تحديث نص السؤال والتقدم
            // تم تعديل ترقيم الأسئلة ليبدأ من 1 بناءً على طلبك الأصلي
            progressEl.textContent = `السؤال ${currentQuestionIndex + 1} من ${allQuestions.length}`;
            questionEl.textContent = currentQuestion.question;
            
            // تغيير اتجاه النص بناءً على محتوى السؤال
            // إذا كان السؤال يبدأ برقم (مثل "1- ...")، نفترض أنه إنجليزي
            if (/^\d/.test(currentQuestion.question)) {
                 questionEl.dir = "ltr";
            } else {
                 questionEl.dir = "rtl";
            }

            // إنشاء أزرار الخيارات
            if (currentQuestion.type === 'mcq') {
                optionsContainer.className = 'grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8'; // إعادة التعيين لـ MCQ
                currentQuestion.options.forEach(option => {
                    const button = createOptionButton(option, option);
                    optionsContainer.appendChild(button);
                });
            } else if (currentQuestion.type === 'tf') {
                optionsContainer.className = 'grid grid-cols-2 gap-4 mt-8'; // تغيير التنسيق لـ T/F
                const trueButton = createOptionButton('صح', true);
                const falseButton = createOptionButton('خطأ', false);
                optionsContainer.appendChild(trueButton);
                optionsContainer.appendChild(falseButton);
            }
        }

        /** إنشاء زر خيار */
        function createOptionButton(text, value) {
            const button = document.createElement('button');
            button.textContent = text;
            // استخدام dataset لتخزين القيمة (سواء كانت نص أو boolean)
            button.dataset.value = value; 
            button.className = "bg-gray-700 p-4 rounded-lg text-left w-full transition-all duration-200 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 text-white text-lg ltr:text-left rtl:text-right";
            // تحديد اتجاه النص للخيارات (ltr للإنجليزية)
            button.dir = "ltr"; 
            if (text === 'صح' || text === 'خطأ') {
                 button.dir = "rtl"; // إلا إذا كان الزر بالعربية
                 button.classList.add("text-center");
            }

            button.addEventListener('click', () => selectAnswer(button));
            return button;
        }

        /** معالجة اختيار الإجابة */
        function selectAnswer(selectedButton) {
            if (answerSelected) return; // منع الاختيار المتعدد
            answerSelected = true;

            const currentQuestion = allQuestions[currentQuestionIndex];
            const selectedValue = selectedButton.dataset.value;
            
            // تحويل القيمة المخزنة (string) إلى النوع الصحيح للمقارنة
            const correctAnswer = currentQuestion.answer;
            let isCorrect;

            if (currentQuestion.type === 'tf') {
                // مقارنة boolean (محول من string 'true'/'false')
                isCorrect = (selectedValue === String(correctAnswer));
            } else {
                // مقارنة string
                isCorrect = (selectedValue === correctAnswer);
            }

            // تعطيل جميع الأزرار
            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-70', 'cursor-not-allowed');
            });

            if (isCorrect) {
                score++;
                selectedButton.classList.add('correct');
                feedbackEl.textContent = 'إجابة صحيحة!';
                feedbackEl.className = 'text-center text-xl font-bold mt-6 min-h-[2rem] text-green-500';
            } else {
                selectedButton.classList.add('incorrect');
                feedbackEl.textContent = 'إجابة خاطئة!';
                feedbackEl.className = 'text-center text-xl font-bold mt-6 min-h-[2rem] text-red-500';

                // إظهار الإجابة الصحيحة
                const correctValue = String(correctAnswer);
                const correctButton = optionsContainer.querySelector(`button[data-value="${correctValue}"]`);
                if (correctButton) {
                    correctButton.classList.add('correct');
                }
            }

            // إظهار زر التالي
            nextBtn.classList.remove('hidden');
        }

        /** الانتقال للسؤال التالي أو إظهار النتائج */
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        /** إظهار شاشة النتائج النهائية */
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            scoreEl.textContent = `لقد حصلت على ${score} من ${allQuestions.length}`;
        }

        // --- 5. ربط الأحداث ---
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', startQuiz);

        // --- 6. بدء الاختبار عند تحميل الصفحة ---
        startQuiz();
    </script>
</body>
</html>